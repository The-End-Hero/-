## JS模块

> JavaScript由于历史的原因并没有模块的概念

### CMD(Common Module Definition)

说道[CMD](https://github.com/cmdjs/specification)就不能不提[commonjs](http://wiki.commonjs.org/wiki/CommonJS)，提到commonjs就不能不提[node](http://nodejs.org/)。

CMD规范参照commonjs中的方式，定义模块的方式如下:

```
define(function(require, exports, module) {

  // The module code goes here
});
```

一个文件就是一个模块，文件名就是模块的名字，使用模块的方法也和commonjs中一致，只需require就好了，模块名字可省略后缀。

```
//使用event.js模块
var ec = require('event');
```

CMD的典型实现就是[seajs](http://seajs.org/)，应用的很广泛。

### AMD(Asynchronous Module Definition)

[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD-(%E4%B8%AD%E6%96%87%E7%89%88))是异步模块定义，特别适合在浏览器端使用，其规范和CMD是很像的，AMD规范中定义模块的方式如下：

```
define(id?, dependencies?, factory);
```

同CMD一样，一个文件即一个模块，模块的使用方法如下：

```javascript
define(["beta"], function (beta) {
	bata.***//调用模块
});
```

AMD主张依赖注入，这点和CMD不同（以来查找）。

AMD也支持已CMD的方式来使用依赖。

AMD的典型实现有[requireJS](http://requirejs.org/)，[modJS](https://github.com/fex-team/mod)和**lodJS**。

### UMD(Universal Module Definition)

```javascript
(function (root, factory) {
    var Data = factory(root);
    if ( typeof define === 'function' && define.amd) {
        // AMD
        define('data', function() {
            return Data;
        });
    } else if ( typeof exports === 'object') {
        // Node.js
        module.exports = Data;
    } else {
        // Browser globals
        var _Data = root.Data;
        
        Data.noConflict = function () {
            if (root.Data === Data) {
                root.Data = _Data;
            }
            
            return Data;
        };
        root.Data = Data;
    }
}(this, function (root) {
	var Data = ...
	//自己的代码
	return Data;
}));
```

其原理就是做个判断，不同的环境进行不同的处理。